(window["webpackJsonpform-builder"]=window["webpackJsonpform-builder"]||[]).push([[0],{128:function(e,t,n){e.exports=n(190)},190:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(12),l=n.n(o),i=n(33),c=n(17),s=n(243),u=n(45),p=n(9),d=n(20),m=n(16),f=n(21),h=n(22),b=n(23),g=n(104),v="http://forms-app.brutgroot.com/cousinzodin/",O=10,y=15,E=["text","number","dropdown","checkmark"],j=n.n(g).a.create({baseURL:v});j.interceptors.request.use(function(e){return console.log(e),e},function(e){return console.log(e),Promise.reject(e)}),j.interceptors.response.use(function(e){return console.log(e),e},function(e){return console.log(e),Promise.reject(e)});var w=j,D=function(e){return function(t){var n=function(n){function r(){var t;return Object(d.a)(this,r),(t=Object(f.a)(this,Object(h.a)(r).call(this))).state={error:null},t.reqInterceptor=e.interceptors.request.use(function(e){return t.setState({error:null}),e}),t.resInterceptor=e.interceptors.response.use(function(e){return e},function(e){t.setState({error:e}),t.props.showModal({title:"Something went wrong",message:e.message})}),t}return Object(b.a)(r,n),Object(m.a)(r,[{key:"componentWillUnmount",value:function(){e.interceptors.request.eject(this.reqInterceptor),e.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){return a.a.createElement(t,Object.assign({error:this.state.error?this.state.error.message:null},this.props,{axios:e}))}}]),r}(r.Component);return Object(c.b)(function(e){return{modals:e.modals.modals}},function(e){return{showModal:function(t){return e({type:"OPEN_MODAL",payload:t})}}})(n)}},x=n(4),F=n.n(x),P=F.a.shape({name:F.a.string.isRequired,value:F.a.oneOfType([F.a.string,F.a.number]).isRequired}),k=F.a.shape({type:F.a.oneOf(E).isRequired,name:F.a.string.isRequired,label:F.a.string.isRequired,placeholder:F.a.string,default:F.a.number,items:F.a.arrayOf(P)}),C=(F.a.shape({name:F.a.string,fields:F.a.arrayOf(k)}),F.a.shape({name:F.a.string,fields:F.a.number,id:F.a.number}),F.a.shape({title:F.a.string,message:F.a.string,id:F.a.number}),F.a.objectOf(F.a.oneOfType([F.a.string,F.a.oneOf([null])])),n(192)),S=n(244),L=n(228),A=n(223),B=n(225),T=n(226),M=n(117),N=n(227),R=n(221),_=n(222);function I(e){var t=Object(R.a)();return a.a.createElement(_.a,{appear:!1,direction:"down",in:!t},e.children)}function W(e){return a.a.createElement(I,null,a.a.createElement(A.a,null,a.a.createElement(B.a,null,a.a.createElement(T.a,{container:!0,justify:"space-between",alignItems:"center"},a.a.createElement(M.a,{variant:"h6",component:"h1"},"FormBuilder"),e.withLink?a.a.createElement(N.a,{component:i.b,size:"small",color:"inherit",to:"/"},"My Forms"):null))))}var q=Object(C.a)(function(){return{appBar:{top:"auto",textAlign:"center",bottom:0},toolBar:{textAlign:"center",justifyContent:"center",paddingTop:"20px"},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"}}});function z(e){var t=q();return a.a.createElement(A.a,{component:"footer",position:"fixed",color:"default",className:t.appBar},a.a.createElement(B.a,{className:t.toolBar},a.a.createElement("div",{className:t.fabButton},e.children),a.a.createElement(N.a,{href:"https://github.com/cousinzodin/form-builder",color:"textSecondary"},"View on GitHub")))}var V=Object(C.a)(function(e){return{root:{flexGrow:1,textAlign:"center",paddingBottom:"100px",paddingTop:"64px",margin:0}}});function U(e){var t=V();return a.a.createElement(S.a,{my:2,bgcolor:"grey.200",minHeight:"100vh",className:t.root},a.a.createElement(W,{withLink:e.withLink}),a.a.createElement(S.a,{my:2,component:e.component?e.component:"div",onSubmit:e.onSubmit},a.a.createElement(L.a,{maxWidth:"form"===e.component?"sm":"lg"},e.children),a.a.createElement(z,null,e.action)))}var H=function(){return function(e){return function(t){function n(){var e,t;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(f.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(a)))).state={errors:{}},t.onBlur=function(e){var n=e.target,r=n.name,a=n.value;t.validateField(r,a),console.log(r,a)},t.onFocus=function(e){t.clearError(e.target.name)},t.clearError=function(e){var n=t.state.errors;n[e]=null,t.setState({errors:n})},t.validateForm=function(){var e={},n=!0;for(var r in t.props.values){var a=t.props.values[r];e[r]=t.validate(r,a),n=!e[r]&&n}return t.setState({errors:e}),n},t.validateField=function(e,n){var r=t.state.errors;r[e]=t.validate(e,n),t.setState({errors:r})},t.validate=function(e,n){var r=t.props.validations[e]||t.props.validations.defaultValidation||null;return r?r(n):null},t}return Object(b.a)(n,t),Object(m.a)(n,[{key:"render",value:function(){return a.a.createElement(e,Object.assign({},this.props,this.state,{onBlur:this.onBlur,onFocus:this.onFocus,validateForm:this.validateForm,validateField:this.validateField,clearError:this.clearError}))}}]),n}(a.a.Component)}},G=n(233),J=n(191),Y=n(234),Z=n(229),$=n(249),K=n(248),Q=n(230),X=Object(C.a)(function(e){return{error:{position:"absolute",bottom:"-1rem"}}});function ee(e){var t=e.type,n=e.id,r=e.name,o=e.label,l=e.placeholder,i=e.value,c=e.onChange,s=e.onBlur,u=e.onFocus,p=e.error,d=X();return a.a.createElement(Z.a,{fullWidth:!0,margin:"normal"},a.a.createElement($.a,{htmlFor:n},o),a.a.createElement(K.a,{error:!!p,onChange:c,onBlur:s,onFocus:u,id:n,name:r,"aria-describedby":l,placeholder:l,type:t,value:i}),p?a.a.createElement(Q.a,{error:!0,className:d.error},p):null)}ee.defaultProps={type:"text"};var te=n(231),ne=n(246);function re(e){var t=e.name,n=e.label,r=e.onChange,o=e.id;return a.a.createElement(Z.a,{fullWidth:!0,margin:"normal"},a.a.createElement(te.a,{control:a.a.createElement(ne.a,{onChange:r,value:t,name:t,id:o,color:"primary"}),label:n}))}var ae=n(245),oe=n(250);function le(e){var t=e.id,n=e.label,r=e.options,o=e.defaultOption,l=e.value,i=e.onChange;return a.a.createElement(Z.a,{fullWidth:!0,margin:"normal"},a.a.createElement($.a,{htmlFor:t},n),a.a.createElement(ae.a,{onChange:i,value:l||r[o].value,inputProps:{name:t,id:t}},r.map(function(e){return a.a.createElement(oe.a,{key:e.value,value:e.value},e.name)})))}function ie(e){var t=e.type,n=e.name,r=e.label,o=e.placeholder,l=e.options,i=e.defaultOption,c=e.onChange,s=e.onBlur,u=e.value,p=e.error,d=e.onFocus;switch(t){case"text":case"number":return a.a.createElement(ee,{onChange:c,onBlur:s,onFocus:d,label:r,id:n+"-field",name:n,placeholder:o,type:t,value:u?u.toString():"",error:p});case"dropdown":return l&&l.length?a.a.createElement(le,{onChange:c,label:r,id:n,options:l,value:u,defaultOption:i}):null;case"checkmark":return a.a.createElement(re,{onChange:c,label:r,name:n,id:n,value:n,checked:u});default:return null}}var ce=Object(C.a)(function(e){return{paper:{padding:e.spacing(2),textAlign:"left",color:e.palette.text.secondary}}});var se=H()(function(e){var t=e.fields,n=e.values,r=e.onChange,o=e.onBlur,l=e.onSubmit,i=e.onFocus,c=e.title,s=e.backError,u=e.errors,p=e.validateForm,d=ce(),m=s?a.a.createElement(M.a,null,s):a.a.createElement(G.a,null);return t&&(m=a.a.createElement(J.a,{className:d.paper},a.a.createElement(M.a,{variant:"h6"},c),t.map(function(e){return a.a.createElement(ie,{value:n[e.name],onBlur:o,onChange:r,onFocus:i,key:e.name,type:e.type,name:e.name,label:e.label,placeholder:e.placeholder,options:e.items,error:u[e.name],defaultOption:e.default})}))),a.a.createElement(U,{component:"form",onSubmit:function(e){e.preventDefault(),p()&&l()},action:a.a.createElement(Y.a,{variant:"extended",color:"secondary",type:"submit",disabled:!t},"Send form")},m)});function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var de,me=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Please add options";return t&&t.length>e?null:n}},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Please fill this field";return e?null:t},he={name:fe,label:fe,option:fe,placeholder:(de=30,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Max length is "+de;return de>=e.length?null:t}),default:function(e,t){return Number.isInteger(e)?null:t},items:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"All options must be named",n=me(0)(e);return n||(e.find(function(e){return!e.name||!e.value})?t:null)}},be=function(e){return function(t){console.log(e);var n,r=null,a=(n=e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Value must be unique";return fe(e)?fe(e):n.filter(function(t){return t===e}).length>1?t:null})(t.name),o=he.label(t.label);switch(a&&(r=r?pe({},r,{name:a}):{name:a}),o&&(r=r?pe({},r,{label:o}):{label:o}),t.type){case"text":case"number":var l=he.placeholder(t.placeholder);l&&(r=r?pe({},r,{placeholder:l}):{placeholder:l});break;case"dropdown":var i=he.items(t.items);i&&(r=r?pe({},r,{select:i}):{select:i})}return r}};function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ve=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={name:"",fields:null,data:{},validationRules:{}},n.createDefaultData=function(e){var t={};return e.forEach(function(e){t[e.name]="dropdown"===e.type&&e.items&&e.items.length?e.items[e.default].value:"checkmark"!==e.type&&""}),t},n.createValidationRules=function(e){var t={};return e.forEach(function(e){"text"!==e.type&&"number"!==e.type||(t[e.name]=fe)}),t},n.handleChange=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.state.data);switch(e.target.type){case"number":t[e.target.name]=parseInt(e.target.value);break;case"checkbox":t[e.target.value]=e.target.checked;break;default:t[e.target.name]=e.target.value}n.setState({data:t})},n.send=function(){var e=n.props.match.params.id,t={fields:n.state.data};w.post("fills/"+e,t).then(function(e){e.data.id&&(n.props.showModal({title:"Form has been sent"}),n.setState({data:n.createDefaultData(n.state.fields)}))}).catch(function(e){})},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;w.get("forms/"+t).then(function(t){e.setState({name:t.data.name,fields:t.data.fields,data:e.createDefaultData(t.data.fields),validationRules:e.createValidationRules(t.data.fields)})}).catch(function(e){})}},{key:"render",value:function(){return a.a.createElement(se,{onSubmit:this.send,onChange:this.handleChange,fields:this.state.fields,values:this.state.data,title:this.state.name,validations:this.state.validationRules,backError:this.props.error})}}]),t}(a.a.Component),Oe=Object(c.b)(function(e){return{forms:e.formsList}},function(e){return{showModal:function(t){return e({type:"OPEN_MODAL",payload:t})}}})(D(w)(ve)),ye=n(11),Ee=n(10),je=function(e){return e.replace(/\W+/g," ").split(/ |\B(?=[A-Z])/).map(function(e){return e.toLowerCase()}).join("-")},we=function(e,t,n){var r=Object(ye.a)(e),a=r.splice(t,1),o=Object(Ee.a)(a,1)[0];return r.splice(n,0,o),r},De=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-xxx-xxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},xe=n(235),Fe=n(3),Pe=n(109),ke=n.n(Pe),Ce=n(6);function Se(e){return function(t,n){var r="function"===typeof t?function(e){return{root:t(e)}}:{root:t};return Object(Ce.a)(r,n)(function(t){var n=t.classes,r=t.className,o=Object(Fe.a)(t,["classes","className"]);return a.a.createElement(e,Object.assign({className:ke()(n.root,r)},o))})}}var Le=n(232),Ae=n(110),Be=n.n(Ae),Te=Object(C.a)(function(e){return{btn:{position:"absolute",top:"2px",right:"2px",zIndex:10,padding:"6px"}}});function Me(e){var t=Te();return a.a.createElement(Le.a,{onClick:e.onClick,"aria-label":"delete",className:t.btn},a.a.createElement(Be.a,{fontSize:"small"}))}var Ne=Object(C.a)(function(e){return{paper:{padding:e.spacing(2),paddingTop:0,marginBottom:e.spacing(1),marginTop:e.spacing(1),color:e.palette.text.secondary,border:"1px solid",borderColor:e.palette.text.secondary,textAlign:"left",position:"relative",backgroundColor:"inherit"},centered:{textAlign:"center",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),margin:"0"}}});var Re=H()(function(e){var t=e.onChange,n=e.onBlur,r=e.onAdd,o=e.onDelete,l=e.errors,i=e.formError,c=e.id,s=e.values,u=e.onFocus,p=Ne(),d=function(e,n){var r=e.target.value,a={name:r,value:je(r)};t(a,n)};return a.a.createElement(S.a,{className:p.centered},a.a.createElement(M.a,{gutterBottom:!0},"Add or edit options for your dropdown "),i?a.a.createElement(Q.a,{className:p.centered,error:!0},i):null,s&&s.length?s.map(function(e,t){var r=t+1;return a.a.createElement(J.a,{className:p.paper,key:c+t,elevation:0},a.a.createElement(Me,{onClick:function(){return o(e.name)}}),a.a.createElement(ee,{onChange:function(e){return d(e,t)},onBlur:n,label:"Option "+r+" name",onFocus:u,name:"option-"+t,id:c+"-option-name-field-"+r,placeholder:"Option name",type:"text",value:e.name,error:l["option-"+t]}))}):null,a.a.createElement(xe.a,{onClick:r,size:"small",variant:"contained",color:"primary"},"+ Add option"))});function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var We=Se(J.a)(function(e){return{padding:e.spacing(2),paddingTop:0,marginBottom:e.spacing(2),marginTop:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",position:"relative",backgroundColor:"inherit"}}),qe=E.map(function(e){return{name:(t=e,t.charAt(0).toUpperCase()+t.slice(1)),value:e};var t}),ze=function(e){function t(e){var n,r=e.values;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this))).updateDefaults=function(e){var t=e.map(function(e,t){return{name:e.name,value:t}});n.setState({defaults:t})},n.onChange=function(e){var t=e.target,r=t.name,a=t.value,o={};o[r]="name"===r?je(a):a,n.setState(o)},n.onOptionChange=function(e,t){var r=Object(ye.a)(n.state.items);r[t]=e;var a=Ie({},n.state,{items:r});n.setState({items:r}),n.save(a),n.updateDefaults(r)},n.onDefaultChange=function(e){var t=Ie({},n.state,{defaultOption:e.target.value});n.setState(t),n.save(t)},n.onTypeChange=function(e){var t=e.target.value,r=Ie({},n.state,{type:t});r.items="dropdown"===t?r.items?r.items:[]:void 0,n.setState(r),n.save(r)},n.addOption=function(){n.setState({items:[].concat(Object(ye.a)(n.state.items),[{name:"",value:""}])})},n.deleteOption=function(e){var t=n.state.items.filter(function(t){return t.name!==e}),r=Ie({},n.state,{items:t});n.setState({items:t}),n.save(r),n.updateDefaults(t)},n.save=function(e){var t=e.type,r=e.name,a=e.label,o=e.placeholder,l=e.items,i=e.defaultOption;switch(t){case"dropdown":n.props.onFieldChange({type:t,name:r,label:a,items:l,default:i},n.props.id);break;case"checkmark":n.props.onFieldChange({type:t,name:r,label:a},n.props.id);break;default:n.props.onFieldChange({type:t,name:r,label:a,placeholder:o},n.props.id)}},n.onBlur=function(e){n.props.onBlur(e),n.save(n.state)},n.onFocus=function(e){n.props.onFocus(e),n.props.formError&&n.props.clearFormError(n.props.id)},n.delete=function(){n.props.onDelete(n.props.id)},n.state={type:r.type,name:r.name,placeholder:r.placeholder||"",label:r.label,items:r.items||[],defaultOption:r.defaultOption||0,defaults:[]},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.updateDefaults(this.state.items)}},{key:"render",value:function(){var e=this.state,t=e.type,n=e.name,r=e.label,o=e.placeholder,l=e.items,i=e.defaultOption,c=this.props.id,s=this.props.formError||this.props.errors||{};return a.a.createElement(We,null,a.a.createElement(Me,{onClick:this.delete}),a.a.createElement(le,{onChange:this.onTypeChange,label:"Field type",name:"type",id:c+"-type",options:qe,value:t,defaultOption:i}),a.a.createElement(ee,{onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,label:"Label",name:"label",id:c+"-label",placeholder:"My field",type:"text",value:r,error:s.label}),a.a.createElement(ee,{onBlur:this.onBlur,onChange:this.onChange,onFocus:this.onFocus,label:"Name",name:"name",id:c+"-name",placeholder:"my-field",type:"text",value:n,error:s.name}),"text"===t||"number"===t?a.a.createElement(ee,{onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,label:"Placeholder",name:"placeholder",id:c+"-placeholder",error:s.placeholder,placeholder:"My helper text",type:"text",value:o}):null,"dropdown"===t?a.a.createElement(a.a.Fragment,null,a.a.createElement(Re,{formError:s.select,values:l,id:c,onAdd:this.addOption,onDelete:this.deleteOption,onChange:this.onOptionChange,validations:{defaultValidation:he.option}}),l&&l.length>1?a.a.createElement(le,{onChange:this.onDefaultChange,label:"Select default option",value:i.toString(),id:c+"-default",options:this.state.defaults,defaultOption:0}):null):null)}}]),t}(a.a.Component),Ve=H()(ze),Ue=n(57),He=function(e){return function(t){return function(n){return a.a.createElement(Ue.a,{onDragEnd:n.onDragEnd},a.a.createElement(Ue.c,{droppableId:e},function(e){return a.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),a.a.createElement(t,n),e.placeholder)}))}}},Ge=function(e){return function(t){var n=t.draggableId,r=t.index,o=Object(Fe.a)(t,["draggableId","index"]);return a.a.createElement(Ue.b,{draggableId:n,index:r},function(t,n){return a.a.createElement("li",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps),a.a.createElement("div",{style:{backgroundColor:n.isDragging?"lightblue":"white"}},a.a.createElement(e,o)))})}}(Ve),Je=He("field-list")(S.a),Ye=Object(C.a)(function(e){return{paper:{padding:e.spacing(2),paddingTop:0,marginBottom:e.spacing(2),marginTop:e.spacing(2),color:e.palette.text.secondary,textAlign:"left"},list:{listStyle:"none",margin:0,padding:0}}});var Ze=H()(function(e){var t=e.order,n=e.values,r=e.onFieldChange,o=e.onNameChange,l=e.onBlur,i=e.onSubmit,c=e.onAddField,s=e.onDelete,u=e.onReorder,p=e.backError,d=e.errors,m=e.validateForm,f=e.onFocus,h=e.clearError,b=Ye(),g=p?a.a.createElement(M.a,null,p):a.a.createElement(G.a,null);if(t){var v=t.map(function(e,t){var o=n[e];return a.a.createElement(Ge,{key:e,id:e,draggableId:e,index:t,onFieldChange:r,onDelete:s,values:o,validations:he,formError:d[e],clearFormError:h})});g=a.a.createElement(a.a.Fragment,null,a.a.createElement(J.a,{className:b.paper},a.a.createElement(ee,{onBlur:l,onFocus:f,onChange:o,name:"formTitle",label:"Form title",id:"new-form-title-field",placeholder:"My new form",value:n.formTitle,error:d.formTitle})),a.a.createElement(Je,{component:"ul",className:b.list,onDragEnd:u},v),t.length>y?null:a.a.createElement(xe.a,{onClick:c,variant:"contained",color:"primary"},"+ Add new field"))}return a.a.createElement(U,{component:"form",onSubmit:function(e){e.preventDefault(),m()&&i()},withLink:!0,action:a.a.createElement(Y.a,{variant:"extended",color:"secondary",type:"submit",disabled:!t||t.length<1}," Save Form ")},g)});function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Qe=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).id=n.props.match.params.id,n.state=n.props.match.params.id?{formTitle:"",fields:{},order:null}:Ke({},n.props.draft),n.save=function(){var e=n.props.match.params.id,t=n.state.order.map(function(e){return n.state.fields[e]}),r={name:n.state.formTitle,fields:t};e?w.put("forms/"+e,r).then(function(e){e&&(n.props.showModal({title:"Form has been saved"}),n.props.onFormSaved(),n.props.history.push("/"))}).catch(function(e){}):w.post("forms/new",r).then(function(e){e.data.id&&(n.props.showModal({title:"Form has been saved"}),n.props.onFormSaved(),n.props.clearDraft(),n.props.history.push("/"))}).catch(function(e){})},n.addField=function(){var e=De(),t=Ke({},n.state.fields);t[e]={type:"text",name:"",label:"",placeholder:""};var r=[].concat(Object(ye.a)(n.state.order),[e]);n.setState({fields:t,order:r})},n.deleteField=function(e){var t=n.state.order.filter(function(t){return t!==e}),r=Ke({},n.state.fields);delete r[e],n.setState({order:t,fields:r})},n.handleFieldChange=function(e,t){var r=Ke({},n.state.fields);r[t]=e;var a=n.state.order.map(function(e){return r[e].name});n.setState({fields:r,names:a})},n.handleNameChange=function(e){n.setState({formTitle:e.target.value})},n.reorderFields=function(e){if(e.destination&&e.destination.index!==e.source.index){var t=we(n.state.order,e.source.index,e.destination.index);n.setState({order:t})}},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.id&&w.get("fills/"+this.id).then(function(t){if(t.data.length>0)return e.props.showModal({title:"You can't edit this form",message:"This form has already been filled"}),void e.props.history.replace("/form/"+e.id);w.get("forms/"+e.id).then(function(t){var n={},r=[],a=[];t.data.fields.forEach(function(e,t){var o=De();n[o]=e,r[t]=o,a[t]=e.name}),e.setState({formTitle:t.data.name,fields:n,order:r,names:a})}).catch(function(e){})}).catch(function(e){})}},{key:"componentWillUnmount",value:function(){this.state.order&&this.props.saveDraft(this.state)}},{key:"render",value:function(){var e=be(this.state.names);return a.a.createElement(Ze,{onSubmit:this.save,onFieldChange:this.handleFieldChange,onNameChange:this.handleNameChange,onDelete:this.deleteField,onAddField:this.addField,onReorder:this.reorderFields,order:this.state.order,values:Ke({},this.state.fields,{formTitle:this.state.formTitle}),backError:this.props.error,validations:{formTitle:fe,defaultValidation:e}})}}]),t}(a.a.Component),Xe=Object(c.b)(function(e){return{draft:e.draft.draft}},function(e){return{showModal:function(t){return e({type:"OPEN_MODAL",payload:t})},saveDraft:function(t){return e({type:"SAVE_FORM_DRAFT",payload:t})},clearDraft:function(){return e({type:"CLEAR_FORM_DRAFT"})},onFormSaved:function(){return e({type:"CLEAR_FORM_LIST"})}}})(D(w)(Qe)),et=n(236),tt=n(114),nt=n.n(tt),rt=Object(C.a)(function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},leftIcon:{marginRight:e.spacing(1),fontSize:14}}});function at(e){var t=e.id,n=e.name,r=rt();return a.a.createElement(T.a,{item:!0,xs:12,sm:6,lg:4},a.a.createElement(J.a,{className:r.paper},a.a.createElement(M.a,{variant:"h6",align:"left"},a.a.createElement(i.b,{to:"./form/"+t},t+" : "+n)),a.a.createElement(et.a,{className:r.divider}),a.a.createElement(T.a,{container:!0,justify:"space-between",alignItems:"center"},a.a.createElement(xe.a,{component:i.b,to:"./constructor/"+t,size:"small",color:"primary"},a.a.createElement(nt.a,{className:r.leftIcon}),"Edit"),a.a.createElement(xe.a,{component:i.b,to:"./form/stats/"+t,size:"small",color:"default"},"Show History"))))}function ot(e){var t=e.forms.map(function(e){return a.a.createElement(at,{key:e.id,id:e.id,name:e.name})});return a.a.createElement(T.a,{container:!0,spacing:3},t)}var lt=n(115),it=n.n(lt),ct=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.forms||w.get("forms/list").then(function(t){e.props.onFormsLoaded(t.data)}).catch(function(e){})}},{key:"render",value:function(){var e=this.props.error?a.a.createElement(M.a,null,this.props.error):a.a.createElement(G.a,null);return this.props.forms&&(e=this.props.forms.length?a.a.createElement(ot,{forms:this.props.forms}):a.a.createElement(M.a,null,"You have no forms yet")),a.a.createElement(U,{withLink:!0,action:a.a.createElement(Y.a,{to:"/constructor",component:i.b,color:"secondary","aria-label":"add"},a.a.createElement(it.a,null))},e)}}]),t}(a.a.Component),st=Object(c.b)(function(e){return{forms:e.forms.formsList}},function(e){return{onFormsLoaded:function(t){return e({type:"ADD_FORM_LIST",list:t})}}})(D(w)(ct)),ut=n(237),pt=n(238),dt=n(239),mt=n(240),ft=n(241),ht=Object(C.a)(function(e){return{table:{minWidth:650}}});function bt(e){var t=e.rows,n=ht(),r=Object.keys(t[0]);return a.a.createElement(ut.a,{className:n.table},a.a.createElement(pt.a,null,a.a.createElement(dt.a,null,r.map(function(e){return a.a.createElement(mt.a,{key:e},e)}))),a.a.createElement(ft.a,null,t.map(function(e){return a.a.createElement(dt.a,{key:e.id},r.map(function(t){return a.a.createElement(mt.a,{key:e.id+t},e[t]?e[t].toString():"")}))})))}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var vt=Se(J.a)(function(e){return{marginTop:e.spacing(2),marginBottom:e.spacing(2),paddingBottom:e.spacing(2)}}),Ot=Se(M.a)(function(e){return{padding:e.spacing(2)}}),yt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={take:0,isAllLoaded:!1},n.loadData=function(){var e=n.props.match.params.id,t=n.state.take,r=O;w.get("fills/".concat(e,"?offset=").concat(r*t,"&count=").concat(r)).then(function(e){n.props.saveFills(e.data),n.setState({take:n.state.take+1,isAllLoaded:e.data.length<r})}).catch(function(e){})},n.getName=function(){return n.props.forms&&n.props.forms[n.props.match.params.id]?n.props.forms[n.props.match.params.id].name:""},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.loadData(),this.getName()||w.get(v+"forms/"+t).then(function(t){e.props.saveForm(t.data)}).catch(function(e){})}},{key:"componentWillUnmount",value:function(){this.props.onDestroy()}},{key:"render",value:function(){var e=this.getName(),t=this.props.error?a.a.createElement(M.a,null,this.props.error):a.a.createElement(G.a,null);if(this.props.fills)if(this.props.fills.length){var n=this.props.fills.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:e.id},e.fields)});t=a.a.createElement(bt,{rows:n})}else t=a.a.createElement(M.a,null,"This form had not been filled yet");return a.a.createElement(U,{withLink:!0},a.a.createElement(vt,null,a.a.createElement(Ot,{variant:"h6",align:"left"},e),t),this.props.fills&&!this.state.isAllLoaded?a.a.createElement(T.a,{item:!0,xs:12},a.a.createElement(xe.a,{onClick:this.loadData,variant:"outlined",size:"small",color:"primary"},"Load More")):null)}}]),t}(a.a.Component),Et=Object(c.b)(function(e){return{fills:e.fills.fillsList,forms:e.forms.formsDict}},function(e){return{saveFills:function(t){return e({type:"ADD_FILL_LIST",list:t})},saveForm:function(t){return e({type:"ADD_FORM",payload:t})},onDestroy:function(){return e({type:"CLEAR_FILL_LIST"})}}})(D(w)(yt));var jt=function(){return a.a.createElement(U,null,a.a.createElement(M.a,null,"Error 404: page not found"))},wt=n(247),Dt=n(242),xt=n(193),Ft=n(116),Pt=n.n(Ft),kt=Object(C.a)(function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(4,4,3),position:"relative",textAlign:"center",minWidth:"260px"},closeButton:{position:"absolute",right:e.spacing(.5),top:e.spacing(.5),padding:"8px",color:e.palette.grey[500]}}});function Ct(e){var t=e.title,n=e.message,r=e.open,o=e.handleClose,l=kt();return a.a.createElement(wt.a,{"aria-labelledby":"modal-title","aria-describedby":"modal-description",className:l.modal,open:r,onClose:o,closeAfterTransition:!0,BackdropComponent:Dt.a,BackdropProps:{timeout:500}},a.a.createElement(xt.a,{in:r},a.a.createElement("div",{className:l.paper},a.a.createElement(Le.a,{"aria-label":"close",className:l.closeButton,onClick:o},a.a.createElement(Pt.a,null)),a.a.createElement("h2",{id:"modal-title"},t),a.a.createElement("p",{id:"modal-description"},n))))}var St=Object(c.b)(function(e){return{modals:e.modals.modals}},function(e){return{closeModal:function(t){return e({type:"CLOSE_MODAL",payload:t})}}})(function(e){var t=e.modals.map(function(t){return a.a.createElement(Ct,{title:t.title,message:t.message,open:!0,key:t.id,handleClose:function(){return e.closeModal(t.id)}})});return a.a.createElement("div",{className:"modal-wrapper"},t)});var Lt=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,null),a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"".concat("/form-builder","/"),exact:!0,component:st}),a.a.createElement(u.a,{path:"".concat("/form-builder","/form/stats/:id"),component:Et}),a.a.createElement(u.a,{path:"".concat("/form-builder","/form/:id"),component:Oe}),a.a.createElement(u.a,{path:"".concat("/form-builder","/constructor/:id"),component:Xe}),a.a.createElement(u.a,{path:"".concat("/form-builder","/constructor/"),component:Xe}),a.a.createElement(u.a,{component:jt})),a.a.createElement(St,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var At=n(30);function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Mt={draft:{formTitle:"My new form",order:[],fields:{}}},Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_FORM_DRAFT":return{draft:Tt({},t.payload)};case"CLEAR_FORM_DRAFT":return Mt;default:return e}};function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var It={fillsList:null},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FILL_LIST":return _t({},e,{fillsList:e.fillsList?[].concat(Object(ye.a)(e.fillsList),Object(ye.a)(t.list)):Object(ye.a)(t.list)});case"CLEAR_FILL_LIST":return _t({},e,{fillsList:null});default:return e}};function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Vt={formsList:null,formsDict:{},formDraft:{name:"My new form",fields:[]}},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FORM_LIST":var n=t.list.reduce(function(e,t){var n=zt({},e);return n[t.id]=t,n},{});return zt({},e,{formsList:e.formsList?[].concat(Object(ye.a)(e.formsList),Object(ye.a)(t.list)):Object(ye.a)(t.list),formsDict:zt({},e.formsDict,{},n)});case"CLEAR_FORM_LIST":return zt({},Vt);case"ADD_FORM":var r={};return r[t.payload.id]=t.payload,zt({},e,{formsDict:zt({},e.formsDict,{},r)});default:return e}};function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Jt={modals:[]},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_MODAL":return{modals:[].concat(Object(ye.a)(e.modals),[Gt({},t.payload,{id:e.modals.length})])};case"CLOSE_MODAL":return{modals:e.modals.filter(function(e){return e.id!==t.payload})};default:return e}},Zt=Object(At.c)({fills:Wt,forms:Ut,modals:Yt,draft:Nt}),$t=Object(At.e)(Zt),Kt=a.a.createElement(c.a,{store:$t},a.a.createElement(i.a,{basename:"/form-builder"},a.a.createElement(Lt,null)));l.a.render(Kt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[128,1,2]]]);
//# sourceMappingURL=main.7ad7360f.chunk.js.map